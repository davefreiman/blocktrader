
<div class="row">
  <div class="large-4 columns">

    <div id="auction-info">
      <h1><%= @auction.name %></h1>
      <p>Seller: <%= @auction.user.username %></p>
    	<p>Starting Price: $<%= @auction.start_price %></p>
    	<p>Current Price: $<%= @auction.current_price%></p>	
    	<p><%= @auction.description %></p>
      <% if @auction.completed? == false %>
    	  <p>Time Remaining: <%= distance_of_time_in_words(@auction.remainder) %></p>
      <% else %>
        <p><strong>AUCTION FINISHED</strong></p>  
      <% end %>  
    </div>

    <div class="large-10 columns">
      <% if !@auction.completed? %>
        <%= form_for ([@auction, @bid]) do |f| %>
        	<%= f.label :amount %>
        	<%= f.number_field :amount%>
        	<%= f.submit :class => "button" %>
        <%end%>	
      <%end%>
    </div>
  </div>

  <div class="large-8 columns">
    <div id="map-canvas">

    </div>  
  </div>
</div>

<div id="lat" style="display:none"> <%= @lat %> </div>
<div id="lon" style="display:none"> <%= @lon %> </div>

<script>
  $(function(){
    console.log("hey")
    var lat = $("#lat").html();
    var lon = $("#lon").html();
    function initialize() {
      console.log(lat)
      var myLatLon = new google.maps.LatLng(lat, lon);
      var mapOptions = {
        zoom: 15,
        center: myLatLon,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }

      var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
      // var marker = new google.maps.Marker({
      //   position: myLatLon,
      //   map: map,
      //   title: "Location" 
      // });
      var circleOptions = {
        strokeColor: '#79b0e6',
        strokeOpacity: 0.8,
        strokeWeight: 2,
        fillColor: '#79b0e6',
        fillOpacity: 0.25,
        map: map,
        center: myLatLon,
        radius: 1000,    
      };
      var mapCircle = new google.maps.Circle(circleOptions);
    }

    function loadScript() {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyDSTLVysvUOawHXL8ON4n4nZdrMpIY1Qo0&sensor=true&callback=initialize";
      document.body.appendChild(script);
    }

    initialize()
  });
 </script>
